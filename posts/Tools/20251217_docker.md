# Panduan Instalasi Docker Engine di Ubuntu
Dokumentasi ini menjelaskan cara menginstal Docker menggunakan metode Repositori APT (metode yang paling disarankan untuk server produksi).
## Persiapan & Pembersihan
Sebelum mulai, hapus paket Docker versi lama (jika ada) untuk menghindari konflik:
```Bash
sudo apt remove docker.io docker-compose docker-compose-v2 docker-doc podman-docker containerd runc
```

## Setup Repositori Docker
Langkah ini bertujuan agar sistem Ubuntu Anda mengenali server resmi Docker sebagai sumber aplikasi.
### Update dan Instal Library Awal
```Bash
sudo apt update
sudo apt install ca-certificates curl
```
### Tambahkan GPG Key Resmi Docker
GPG key memastikan paket yang Anda unduh aman dan asli.
```Bash
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
```
### Tambahkan Sumber Repositori ke APT
```Bash
sudo tee /etc/apt/sources.list.d/docker.sources <<EOF
Types: deb
URIs: https://download.docker.com/linux/ubuntu
Suites: $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}")
Components: stable
Signed-By: /etc/apt/keyrings/docker.asc
EOF
```

## Instalasi Docker Engine
Sekarang, instal inti dari Docker beserta plugin penting lainnya:
```Bash
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

## Verifikasi Hasil Instalasi
Pastikan layanan Docker sudah berjalan dengan perintah berikut:
* Cek Status: 
```
sudo systemctl status docker
```
* Uji Coba Kontainer:
```Bash
sudo docker run hello-world
```
Jika berhasil, Anda akan melihat pesan 
```bash
"Hello from Docker!"
```
## Tips Pasca-Instalasi (Penting!)
Secara default, Anda harus selalu mengetik sudo untuk menjalankan perintah Docker. Agar lebih praktis, masukkan user Anda ke grup Docker:
```Bash
# Tambahkan user Anda ke grup docker
sudo usermod -aG docker $USER

# Aktifkan perubahan (tanpa harus logout)
newgrp docker
```

Sekarang Anda bisa mengetik `docker ps` tanpa `sudo`.

## Ringkasan Perintah Penting
`docker ps` Melihat kontainer yang sedang berjalan.
`docker images` Melihat daftar image yang sudah di-download.
`docker compose up -d` Menjalankan aplikasi multi-kontainer di background.
`sudo systemctl enable docker` Mengatur agar Docker otomatis jalan saat server baru nyala.

## Cara Menghapus Docker (Uninstall)
Jika suatu saat Anda ingin menghapus total Docker dari server:
```Bash
sudo apt purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```



# Panduan Optimasi Docker (Pasca-Instalasi)
Tujuan dari langkah-langkah ini adalah agar Anda tidak perlu terus-menerus mengetik `sudo` dan memastikan Docker otomatis menyala saat server dijalankan.

## Menjalankan Docker Tanpa `sudo`
Secara default, Docker dimiliki oleh user root. Jika Anda ingin menjalankan perintah docker sebagai user biasa, ikuti langkah ini:

### Buat Grup Docker
Biasanya grup ini sudah otomatis ada setelah instalasi, tapi tidak ada salahnya memastikan.

```Bash

sudo groupadd docker
```
### Masukkan User Anda ke Grup
Ganti `$USER` dengan nama user Anda, atau biarkan tetap `$USER` untuk memasukkan user yang sedang login saat ini.

```Bash

sudo usermod -aG docker $USER
```
### Aktifkan Perubahan
Agar perubahan langsung terasa tanpa harus logout atau restart server:

```Bash

newgrp docker
```
### Tes Hasilnya
Coba jalankan perintah ini tanpa kata sudo:

```Bash

docker run hello-world
```
Penting: Menambahkan user ke grup docker memberikan hak akses yang sangat tinggi (setara root). Pastikan hanya user terpercaya yang dimasukkan ke grup ini.

## Mengatur Docker Agar Otomatis Jalan (Auto-start)
Agar Anda tidak perlu menyalakan Docker secara manual setiap kali server Ubuntu Anda restart atau dinyalakan ulang.

### Aktifkan Docker saat Booting
```Bash

sudo systemctl enable docker.service
sudo systemctl enable containerd.service
```
### Cara Membatalkannya (Opsional)
Jika Anda ingin Docker hanya menyala jika dipanggil manual:

```Bash

sudo systemctl disable docker.service
sudo systemctl disable containerd.service
```
## Solusi Jika Muncul "Permission Denied" pada Config
Kadang setelah otak-atik sudo, muncul error saat memanggil perintah docker karena folder .docker di home directory Anda terkunci. Cara memperbaikinya:

```Bash

sudo chown "$USER":"$USER" /home/"$USER"/.docker -R
sudo chmod g+rwx "$HOME/.docker" -R
```
## Tips Tambahan: Manajemen Log (Penting untuk Server)
Secara default, Docker menyimpan log (catatan aktivitas) kontainer selamanya. Jika dibiarkan, file log ini bisa membuat hardisk server penuh.

Saran: Gunakan "Log Rotation" (pembatasan ukuran log). Anda bisa mengatur ini nanti saat membuat file docker-compose.yml dengan menambahkan baris:

```YAML

logging:
  driver: "json-file"
  options:
    max-size: "10m"   # Maksimal file log 10MB
    max-file: "3"     # Maksimal menyimpan 3 file lama
```

# Panduan Jaringan Docker (Networking)
Jaringan Docker memungkinkan kontainer untuk saling terhubung, berkomunikasi dengan host, atau menjangkau internet.
## Jaringan Bawaan: Default Bridge
Saat pertama kali menginstal Docker, Anda memiliki jaringan otomatis bernama `bridge`.
* Perilaku: Kontainer yang tidak ditentukan jaringannya akan masuk ke sini.
* Kelemahan: Kontainer hanya bisa saling panggil menggunakan Alamat IP, bukan nama kontainer. Ini menyulitkan jika IP berubah setelah restart.
## Jaringan Buatan User (User-Defined Networks)
Sangat disarankan untuk membuat jaringan sendiri untuk setiap proyek aplikasi Anda.
* Kelebihan: Mendukung DNS Internal. Anda bisa memanggil database dengan nama db-server, bukan IP 172.18.0.2.
* Keamanan: Kontainer di jaringan A tidak bisa melihat kontainer di jaringan B.Cara Membuat Jaringan:Bashdocker network create -d bridge nama-jaringan-anda
## Jenis-Jenis Driver Jaringan
Docker menyediakan beberapa cara komunikasi sesuai kebutuhan:
`bridge` (Default) Untuk aplikasi standar yang berjalan dalam satu server.
`host` Menghapus isolasi. Kontainer menggunakan IP server secara langsung (lebih cepat tapi kurang aman).
`none` Isolasi total. Kontainer tidak punya akses jaringan sama sekali.
`overlay` Digunakan jika kontainer berada di beberapa server berbeda (Docker Swarm).
`macvlan` Memberikan alamat MAC fisik pada kontainer sehingga terlihat seperti perangkat nyata di jaringan rumah/kantor.

## Port Mapping (Membuka Akses Keluar)
Secara default, kontainer bersifat tertutup dari dunia luar. Anda harus "membuka pintu" menggunakan flag `-p` atau -`-publish`.
Rumus: `-p [Port-Host]:[Port-Kontainer]`
```Bash
# Mengakses web Nginx (port 80) melalui port 8080 di browser Anda
docker run -p 8080:80 nginx
```
## DNS & Hostname
* DNS: Secara default, kontainer meniru setingan DNS server Ubuntu Anda. Anda bisa mengubahnya dengan `--dns=8.8.8.8`.
* Hostname: Nama yang muncul di dalam terminal kontainer. Bisa diatur dengan --hostname nama-komputer.

## Menghubungkan Kontainer ke Jaringan Lain
Kontainer bisa memiliki "dua kabel LAN virtual" (terhubung ke dua jaringan sekaligus).
```Bash
# Menghubungkan kontainer yang sedang jalan ke jaringan baru
docker network connect nama-jaringan-baru nama-kontainer
```
## Tips Profesional:
* Gunakan Nama, Bukan IP: Selalu gunakan jaringan buatan sendiri agar Anda bisa menggunakan fitur DNS (panggil aplikasi lewat nama).
* Prune Berkala: Jaringan yang tidak terpakai menumpuk di sistem. Bersihkan dengan:
```Bash
docker network prune
```
* Isolasi Database: Hubungkan Database hanya ke jaringan internal (tanpa akses internet) untuk keamanan maksimal, lalu hubungkan Web App ke jaringan internal dan jaringan eksternal (port mapping).

