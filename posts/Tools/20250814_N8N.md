# N8N
##  Expression
**Expression** di n8n adalah fitur yang memungkinkan Anda mengisi parameter node secara dinamis dengan menjalankan kode JavaScript. Dengan expression, Anda tidak perlu selalu memasukkan nilai statis—Anda bisa mengambil data dari node sebelumnya, workflow, atau lingkungan n8n, lalu memanipulasinya sesuai kebutuhan.

**struktur penulisan sintaks expression di n8n**

1. **Tanda Kurung Kurawal Ganda**
Semua expression di n8n harus ditulis di dalam tanda kurung kurawal ganda:  
```
{{ ... }}
```
Ini menandakan bahwa yang ada di dalamnya adalah kode yang akan dieksekusi secara otomatis oleh n8n, bukan sekadar teks biasa.


2. **Mengambil Data dari Node**
Biasanya, expression digunakan untuk mengambil data dari node sebelumnya.  
Contoh:
```
{{$json["nama"]}}
```
Artinya: ambil data dari field `nama` pada data yang masuk ke node ini.

Jika ingin mengambil data dari node tertentu, gunakan:
```
{{$node["NamaNode"].json["nama"]}}
```
Misal:
```
{{$node["Set"].json["firstName"]}}
```
Artinya: ambil data `firstName` dari node bernama "Set" [Expressions](https://docs.n8n.io/code/expressions/#expressions).


3. **Bisa Menggunakan JavaScript Sederhana**
Anda bisa menulis logika sederhana, misalnya:
```
{{ $json.umur > 18 ? "Dewasa" : "Anak-anak" }}
```
Artinya: jika umur lebih dari 18, hasilnya "Dewasa", jika tidak, "Anak-anak".


4. **Gabungkan dengan Teks**
Expression bisa digabung dengan teks biasa, misalnya:
```
Halo, nama saya {{ $json["nama"] }} dan saya tinggal di {{ $json["kota"] }}.
```
Hasil akhirnya akan menjadi kalimat dengan data yang diambil dari workflow.


5. **Langkah Penggunaan di n8n**
- Klik parameter yang ingin diisi expression.
- Pilih mode “Expression”.
- Tulis expression di editor yang muncul.


6. **Contoh Lengkap**
Misal, Anda ingin mengirim pesan ke pelanggan:
```
Hi {{ $json.customer_name }}. Your description is: {{ $json.customer_description }}
```
Expression ini akan otomatis mengganti `customer_name` dan `customer_description` dengan data yang sesuai saat workflow dijalankan [Quickstart](https://docs.n8n.io/try-it-out/quickstart/#the-very-quick-quickstart).


**Kesimpulan:**  
Struktur expression di n8n selalu diapit `{{ ... }}`, bisa berisi pengambilan data, logika sederhana, atau gabungan dengan teks. Tujuannya agar workflow bisa berjalan otomatis dan dinamis sesuai data yang diproses.

Jika ada error, pastikan penulisannya benar dan data yang diambil memang tersedia [Common Issues](https://docs.n8n.io/code/cookbook/expressions/common-issues/#expressions-common-issues).

## konversi data
Berikut adalah cara melakukan **konversi data** di n8n beserta kebalikannya, berdasarkan dokumentasi resmi:

1. String ⇄ Date

**String ke Date:**  
Gunakan `.toDateTime()` pada string berformat tanggal standar:
```javascript
{{ "2024-06-10".toDateTime() }}
```
Jika formatnya khusus, gunakan Luxon:
```javascript
{{ DateTime.fromFormat("10-06-2024", "dd-MM-yyyy") }}
```
[Strings: toDateTime()](https://docs.n8n.io/code/builtin/data-transformation-functions/strings/#strings)  
[Luxon: Convert date string to Luxon](https://docs.n8n.io/code/cookbook/luxon/#convert-date-string-to-luxon)

**Date ke String:**  
Gunakan fungsi format Luxon, misal:
```javascript
{{ DateTime.fromISO("2024-06-10").toFormat("dd-MM-yyyy") }}
```
Atau gunakan `.toLocaleString()` untuk format yang mudah dibaca:
```javascript
{{ $today.toLocaleString() }}
```
[Create human-readable dates](https://docs.n8n.io/code/cookbook/luxon/#create-human-readable-dates)

2. String ⇄ Number

**String ke Number:**  
Gunakan `.toDecimalNumber()`:
```javascript
{{ "12345".toDecimalNumber() }}
```
[Strings: toDecimalNumber()](https://docs.n8n.io/code/builtin/data-transformation-functions/strings/#strings)

**Number ke String:**  
Gunakan `.toString()`:
```javascript
{{ 12345.toString() }}
```
Atau gunakan `.format()` untuk format angka:
```javascript
{{ 12345.format() }}
```
[Numbers: format()](https://docs.n8n.io/code/builtin/data-transformation-functions/numbers/#numbers)

3. Number ⇄ Date

**Number ke Date:**  
Jika angka adalah timestamp (detik):
```javascript
{{ 1717996800.toDateTime('s') }}
```
[Numbers: toDateTime()](https://docs.n8n.io/code/builtin/data-transformation-functions/numbers/#numbers)

**Date ke Number:**  
Dokumentasi n8n tidak secara eksplisit menyebutkan fungsi untuk mengubah Date ke Number (timestamp), namun Anda bisa menggunakan fungsi Luxon seperti `.toSeconds()` atau `.toMillis()` di dalam Code node JavaScript, bukan di expression editor.  
Jika butuh detail lebih lanjut, silakan tanyakan kembali.

4. String ⇄ Boolean

**String ke Boolean:**  
Gunakan `.toBoolean()`:
```javascript
{{ "true".toBoolean() }}
```
[Strings: toBoolean()](https://docs.n8n.io/code/builtin/data-transformation-functions/strings/#strings)

**Boolean ke String:**  
Gunakan `.toString()`:
```javascript
{{ true.toString() }}
```
(Fungsi ini adalah JavaScript standar.)

5. Cek Tipe Data Lain

- **Cek apakah string adalah angka:**  
  ```javascript
  {{ "12345".isNumeric() }}
  ```
  [Strings: isNumeric()](https://docs.n8n.io/code/builtin/data-transformation-functions/strings/#strings)

- **Cek apakah string kosong:**  
  ```javascript
  {{ "".isEmpty() }}
  ```
  [Strings: isEmpty()](https://docs.n8n.io/code/builtin/data-transformation-functions/strings/#strings)

## memformat tanggal dan waktu di n8n
Berikut penjelasan lebih detail tentang metode-metode Luxon untuk memformat tanggal dan waktu di n8n, berdasarkan dokumentasi resmi:

| Method                                       | Contoh Output                   | Keterangan                                             |
| -------------------------------------------- | ------------------------------- | ------------------------------------------------------ |
| `.toISO()`                                   | `2025-08-14T13:45:30.123+07:00` | Menghasilkan string tanggal dan waktu lengkap dalam format ISO-8601, termasuk zona waktu dan milidetik. Cocok untuk kebutuhan API yang mensyaratkan format standar internasional. |
| `.toISODate()`                               | `2025-08-14`                    | Menghasilkan hanya bagian tanggal dalam format `YYYY-MM-DD` (ISO). Sangat berguna jika Anda hanya butuh tanggal tanpa waktu. |
| `.toISOTime()`                               | `13:45:30.123+07:00`            | Menghasilkan hanya bagian waktu (jam, menit, detik, milidetik) beserta offset zona waktu. |
| `.toISOWeekDate()`                           | `2025-W33-4`                    | Menghasilkan tanggal dalam format minggu ISO, yaitu `Tahun-Wke-Hari`. Contoh: `2025-W33-4` berarti hari ke-4 (Kamis) di minggu ke-33 tahun 2025. |
| `.toISOTime({ suppressMilliseconds: true })` | `13:45:30+07:00`                | Menghasilkan waktu tanpa milidetik, hanya jam, menit, detik, dan offset zona waktu. |
| `.toISO({ suppressMilliseconds: true })`     | `2025-08-14T13:45:30+07:00`     | Menghasilkan tanggal dan waktu lengkap dalam format ISO, tapi tanpa milidetik. |
| `.toISO({ includeOffset: false })`           | `2025-08-14T13:45:30.123`       | Menghasilkan tanggal dan waktu lengkap dalam format ISO, tapi tanpa informasi zona waktu (offset). |


**Catatan penting:**
- Fungsi-fungsi ini digunakan pada objek DateTime dari Luxon, yang didukung penuh di n8n untuk manipulasi tanggal dan waktu.
- `.toISO()` dan turunannya sangat berguna saat Anda perlu memastikan format tanggal/waktu konsisten, terutama untuk integrasi API eksternal yang mensyaratkan format ISO-8601 [Format a Date](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.datetime/#format-a-date), [Luxon: Create human-readable dates](https://docs.n8n.io/code/cookbook/luxon/#create-human-readable-dates).

Jika Anda ingin mengubah format tanggal/waktu di n8n, gunakan metode-metode di atas sesuai kebutuhan output yang diinginkan.

## operator expression
Berikut adalah beberapa **operator expression** yang dapat digunakan di n8n beserta contohnya:

1. Operator Ternary (`? :`)
Digunakan untuk memilih nilai berdasarkan kondisi.
```javascript
{{ $json["variable_name"] ? $json["variable_name"] : "not found" }}
```
Jika `variable_name` ada isinya, hasilnya nilainya; jika tidak, hasilnya "not found"  
[Check incoming data](https://docs.n8n.io/code/cookbook/expressions/check-incoming-data/#check-incoming-data)

2. Nullish Coalescing (`??`)
Memberikan nilai default jika nilai sebelumnya null atau undefined.
```javascript
{{ $json["umur"] ?? 0 }}
```
Jika `umur` tidak ada, hasilnya `0`.

3. Logical OR (`||`)
Memberikan nilai default jika nilai sebelumnya falsy (null, undefined, 0, "", dsb).
```javascript
{{ $json["nama"] || "Tanpa Nama" }}
```
Jika `nama` kosong, hasilnya "Tanpa Nama".

4. Operator Penjumlahan (`+`)
Menjumlahkan dua nilai.
```javascript
{{ $json["nilai1"] + $json["nilai2"] }}
```
Menjumlahkan nilai dari dua field.

5. Optional Chaining (`?.`)
Mengakses properti secara aman tanpa error jika salah satu bagian undefined.
```javascript
{{ $json["Photo"]?.[0]?.filename }}
```
[Forum: Conditional Expression](https://community.n8n.io/t/129651)

6. Operator Perbandingan (`==`, `!=`, `>`, `<`, `>=`, `<=`)
Digunakan untuk membandingkan dua nilai.
```javascript
{{ $json["umur"] > 18 ? "Dewasa" : "Anak-anak" }}
```
Jika umur lebih dari 18, hasilnya "Dewasa", jika tidak "Anak-anak".


Operator-operator ini dapat digunakan langsung di expression editor n8n untuk membuat logika dinamis sesuai kebutuhan workflow Anda [Expressions](https://docs.n8n.io/code/expressions/#expressions).


## ref
https://docs.n8n.io/code
https://moment.github.io/luxon/api-docs/index.html